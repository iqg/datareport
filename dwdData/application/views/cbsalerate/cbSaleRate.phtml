<!DOCTYPE html>
<html>
<title>多维度运营数据</title>
<head>
    <link rel="stylesheet" type="text/css" href="/public/css/jquery.dataTables.css">
    <link rel="stylesheet" type="text/css" href="/public/js/My97DatePicker/skin/WdatePicker.css">
    <script type="text/javascript" language="javascript" src="/public/js/jquery.js"></script>
    <script type="text/javascript" language="javascript" src="/public/js/My97DatePicker/WdatePicker.js"></script>
    <script type="text/javascript" language="javascript" src="/public/js/jquery.dataTables.js"></script>
    <script type="text/javascript" language="javascript" src="/public/js/main.js"></script>

    <script type="text/javascript" language="javascript" >
        $(document).ready(function() {
            var dataTable = $('#weekDataTable').DataTable( {
                "processing": true,
                "serverSide": true,
                retrieve: true,
                "ajax":{
                    url :"getJsonData?startDate=<?php echo $startDate?>&endDate=<?php echo $endDate?>&city=<?php echo $city ?>", // json datasource
                    type: "get",  // method  , by default get
                    error: function(){  // error handling
                        $(".employee-grid-error").html("");
                        $("#employee-grid").append('<tbody class="employee-grid-error"><tr><th colspan="3">No data found in the server</th></tr></tbody>');
                        $("#employee-grid_processing").css("display","none");

                    }
                },
                "createdRow": function( row, data, dataIndex ) {
                    $(row).children('td').eq(0).attr('style', 'text-align: center;')
                    $(row).children('td').eq(1).attr('style', 'text-align: center;')
                    $(row).children('td').eq(2).attr('style', 'text-align: center;')
                    $(row).children('td').eq(3).attr('style', 'text-align: center;')
                    $(row).children('td').eq(4).attr('style', 'text-align: center;')
                    $(row).children('td').eq(5).attr('style', 'text-align: center;')
                },
                columns: [
                    { data: 'city' },
                    { data: 'saler' },
                    { data: 'shop' },
                    { data: '活动ID' },
                    { data: '订单量' },
                    { data: 'sale_rate'}
                ]
            } );
        } );
    </script>


    <style>
        div.container {
            margin: 0 auto;
            max-width:760px;
        }
        div.header {
            margin: 100px auto;
            line-height:30px;
            max-width:760px;
        }
        body {
            background: #f7f7f7;
            color: #333;
            font: 90%/1.45em "Helvetica Neue",HelveticaNeue,Verdana,Arial,Helvetica,sans-serif;
        }
    </style>
</head>
<body>
<div class="header"><h1>活动销售率</h1></div>
<div class="container" >
    <select id="dataType" data-rel="chosen" >
        <option value="0">请选择</option>
        <option value="1">基于城市的周订单量</option>
        <option value="2">基于城市的周上下线活动数量</option>
        <option value="3">投诉类型统计</option>
        <option value="4">运营标签点击次数</option>
        <option value="5">睡前摇(验证率)</option>
        <option value="6">往下拍(验证率)</option>
        <option value="7">往下拍(销售率)</option>
    </select>

    <input id="startDate" class="Wdate" type="text" value=<?php echo $startDate?> onFocus="WdatePicker({maxDate:'#F{$dp.$D(\'endDate\')||\'2020-10-01\'}'})"/>
    <input id="endDate" class="Wdate" type="text" value=<?php echo $endDate?> onFocus="WdatePicker({minDate:'#F{$dp.$D(\'startDate\')}',maxDate:'2020-10-01'})"/>
    <button type="button" onclick=findByCity()>查询</button>
    <button type="button" onclick=excelExport()>excel导出</button>
    <table id="weekDataTable"  cellpadding="0" cellspacing="0" border="0" class="display" width="100%">
        <thead>
        <tr>
            <th>城市</th>
            <th>店名</th>
            <th>订单量</th>
            <th>可卖数</th>
            <th>销售率</th>
            <th>跟进销售</th>
        </tr>
        </thead>
    </table>
</div>
</body>
</html>
